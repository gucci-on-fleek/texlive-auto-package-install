% texlive-auto-package-install
% https://github.com/gucci-on-fleek/texlive-auto-package-install
% SPDX-License-Identifier: MPL-2.0+ OR CC-BY-SA-4.0+
% SPDX-FileCopyrightText: 2026 Max Chernoff

\doifnot{\contextmark}{LMTX}{
    \errhelp{LMTX/MkXL is required to compile this file.}
    \errmessage{Fatal error, exiting.}
}

% Get from either of
%     <texmf-dist/source/luatex/lua-widow-control/lwc-manual.mkxl>
%     <https://raw.githubusercontent.com/gucci-on-fleek/lua-widow-control/master/docs/manual/lwc-manual.mkxl>
\environment lwc-manual

\usemodule[scite]

% Abbreviations
\def\pkg/{\sans{network-install}}
\def\Pkg/{\sans{network-install}}
\useURL[projecturl][https://github.com/gucci-on-fleek/texlive-auto-package-install]
\let\q=\quotation


\startdocument[
    title=network-install,
    author=Max Chernoff,
    version=0.0.0, %%version
    github=https://github.com/gucci-on-fleek/texlive-auto-package-install,
]

\Pkg/ is package for Lua\LaTeX{} that automatically installs missing \LaTeX{}
packages from \TeX{}~Live when compiling documents.

\section{Quick Start}

\startTEX
\RequirePackage{network-install}
\documentclass{article}

\begin{document}
    Hello, world!
\end{document}
\stopTEX

\subject{Contents}
\placecontent[criterium=all]

\section{Usage}

When compiling a \LaTeX{} document, if any files are missing from your
\TeX{}~Live installation, this package will automatically download and install
them. To do so, make sure to put
\typ[option=TEX]{\RequirePackage{auto-package-install}} as the very first line
of your document preamble. Make sure to compile with \typ{--socket} (or
\typ{--shell-escape}), otherwise the package won't work.

\section{Demonstration}

After installing only \typ{scheme-basic}, the following file compiles
without any errors:

\startTEX
\RequirePackage{network-install}
\documentclass{article}

\usepackage{amsmath}

\usepackage{lua-widow-control}

\usepackage{fontspec}
\setmainfont{NewCM10-Regular.otf}

\begin{document}
     Hello, world!
\end{document}
\stopTEX


\page
\setuplayout[
    width=middle,
    backspace=1in,
    height=9.25in,
]
\section[sec:implementation]{Implementation}

From here and until the end of this manual is the raw source code of \pkg/.

If want to offer any improvements to the code below, please open an issue or a
\acronym{PR} on \goto{GitHub}[url(projecturl)].

\setupbodyfont[10pt]
\setuphead[subsection][
    alternative=normal,
    style=\ssitb,
    after={\blank[disable, penalty:10000]},
    page=yes,
    continue=yes,
]

\subsection{auto-package-install.lua}

\typeLUAfile{../source/auto-package-install.lua}

\subsection{auto-package-install.sty}

\typeTEXfile{../source/auto-package-install.sty}

\vfill\penalty10000
\startalignment[flushright]
    \tfa\meta{End of manual}
\stopalignment
\stopdocument
